<tool id="trimal" name="trimAL">
	<description>cleaning aligned sequences</description>
	<command interpreter="bash">./trimal.sh -in $input 
						-out $output1 
						-htmlout $output2
					#if $select.choice == "default" :
						$select.selection
					#end if
					#if $select.choice == "userC" :
						#if $select.gtin
							-gt $select.gtin
						#end if
						#if $select.stin
							-st $select.stin
						#end if
						#if $select.consin
							-cons $select.consin
						#end if
					#end if
	</command>
	<inputs>
		<param format="fasta" name="input" type="data" label="Source file" help="Fasta sequence file"/>
		<conditional name="select">
			<param name="choice" type="select" label="How to select sites to be removed">
				<option value="default">Let trimAl select sites</option>
				<option value="userC">User parameters</option>
			</param>
			<when value="default">
				<param name="selection" type="select" label="Predefined cleaning strategy">
					<option value="-strictplus">Strictplus: Optimized for Neighbour Joining phylogenetic tree reconstruction</option>
					<option value="-gappyout">Gappyout: only uses information based on gaps' distribution</option>
					<option value="-automated1">Automated: Optimized for Maximum Likelihood phylogenetic tree reconstruction</option>
					<option value="-strict">Strict automated selection</option>
				</param>
			</when>
			<when value="userC">
				<param name="gtin" type="text" label="Fraction of sequences with a gap allowed" optional="true" help="0 to 1, with 1 will remove all columns with any gap"/>
				<param name="stin" type="float" label="Minimum average similarity allowed" optional="true" help="0 to 1, for example 0.001 value will remove all columns with a similarity score lower than 0.001"/>
				<param name="consin" type="integer" label="Minimum percentage of the positions in the original alignment to conserve" optional="true" help="0 to 100, for example 60 value will conserve at least 60% of the columns"/>
			</when>
		</conditional>
	</inputs>
	<outputs>
		<data format="input" name="output1" label="trimAl Cleaning sequencies"/>
		<data format="html" name="output2" label="trimAl Htmlout"/>
	</outputs>
	<help>	
	
.. class:: infomark

**Program encapsulated in Galaxy and developed by Southgreen**
**Encapsulation improved by ATGC (C. Vernette, V. Lefort)**


.. class:: infomark

**trimAL version 1.2, 2010**

-----
	
==============
 Please cite: 
==============


"trimAl: a tool for automated alignment_ trimming in large-scale phylogenetic analyses."


.. _alignment: http://trimal.cgenomics.org/_media/trimal.2009.pdf

**Salvador Capella-Gutierrez; Jose M. Silla-Martinez; Toni Gabaldon** 

Bioinformatics 2009 25: 1972-1973.


-----	
	
==========
 Overview
==========	

TrimAl, a tool for automated alignment trimming, which is especially suited for large-scale analyses. Its speed and the possibility for automatically adjusting the parameters to optimize the phylogenetic signal-to-noise ratios for different families, makes trimAl especially suited for large-scale phylogenomic analyses, involving thousands of large multiple sequence alignments.

-----

For further informations, please visite the trimAl_ website.

.. _trimAl: http://trimal.cgenomics.org/introduction


	</help>

</tool>
