<macros>
    <token name="@MUSCLE_PATH@">muscle</token>
    <token name="@MUSCLE_COMMAND@">
                ##Do not display progress messages
                -quiet
                
                -in $input 
                -out $output 
                    
                #if $mode.run == "custom" :
                    -maxiters $mode.iterations
                #else:
                    -maxiters $mode.run
                #end if
                
                -cluster1 $cluster
                $diags
                $outputFormat
    </token>
    <xml name ="muscle_opt">
        <param name="input" type="data" format="fasta" label="Source file" help="Fasta sequence file"/>
        <conditional name="mode">
            <param name="run" type="select" label="Run mode">
                <option value="2">Progressive mode (faster)</option>
                <option value="1">Fastest mode</option>
                <option value="16" selected="true" >Full mode</option> 
                <option value="custom">Custom mode</option>
            </param>
            <when value="custom">
                <param name="iterations" type="integer" min='1' value="16" label="Maximum number of iterations" help="Increase the quality, increase the computing time"/>
            </when>
        </conditional>
        
        <param name="diags" type="boolean" truevalue="-diags" falsevalue="" checked="False" label="Find diagonals" help="Faster for similar sequences" />
        
        <param name="cluster" type="select" label="Clustering method">
            <option value="upgma">UPGMA</option>
            <option value="upgmb" selected="true" >UPGMB</option> 
            <option value="neighborjoining">Neighbor Joining</option>
        </param>
        <param name="outputFormat" type="select" label="Output format" help="Either FASTA or ClustalW">
            <option value="" selected="true">FASTA</option>
            <option value="â€‘phyi">Phylip interleaved format</option>
        </param>
    </xml>
    
</macros>